{"ast":null,"code":"// --- 입주민 마이페이지 ---\nimport{data,useNavigate}from\"react-router-dom\";import{fetchHeaderBundle}from\"../api/userApi\";import\"./ResidentMypage.scss\";import{useEffect,useState}from\"react\";import{useUser}from\"../contexts/UserContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ResidentMypage=()=>{const navigate=useNavigate();const{profile}=useUser();const[mypageData,setMypageData]=useState(null);//마이페이지 데이터 로드\nuseEffect(()=>{if(!(profile!==null&&profile!==void 0&&profile.id))return;const loadmypage=async()=>{try{const data=await fetchHeaderBundle(profile.id);if(!data){var _data$current_spot;//만약 가져온 데이터가 없다면 기본값(빈 값)으로 세팅\nsetMypageData({role_label:\"입주민\",dong_ho:profile.dong_ho||\"\",car_num:profile.car_num||\"\",current_spot:(_data$current_spot=data===null||data===void 0?void 0:data.current_spot)!==null&&_data$current_spot!==void 0?_data$current_spot:null});return;}//가져온 데이터가 있다면(mypageData)에 담습니다. -> 이때 화면이 자동으로 다시 그려집니다.\nsetMypageData(data);}catch(error){//데이터를 가져오다 에러가 나면 콘솔에 표시하고 기본값을 세팅\nconsole.log(\"마이 페이지 데이터 로딩 실패\",error);setMypageData({role_label:\"입주민\",dong_ho:profile.dong_ho||\"\",car_num:profile.car_num||\"\",current_spot:null});}};loadmypage();},[]);useEffect(()=>{console.log(\"mypageData:\",mypageData);},[mypageData]);//로그아웃\nconst handleLogout=()=>{navigate(\"/\");};if(mypageData===null){return/*#__PURE__*/_jsx(\"div\",{children:\"\\uB85C\\uB529\\uC911...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"resident-mypage\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"resident-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mypage-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"role\",children:mypageData.role_label||\"입주민\"}),/*#__PURE__*/_jsx(\"p\",{className:\"address\",children:mypageData.dong_ho||\"동·호수 정보 없음\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"car-number\",children:mypageData.car_num||\"차량 정보 미등록\"}),/*#__PURE__*/_jsx(\"span\",{className:\"parking-spot\",children:mypageData.current_spot?\"\\uD604\\uC7AC \\uC8FC\\uCC28 \\uC704\\uCE58: \".concat(mypageData.current_spot):\"현재 주차 중이 아닙니다\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>alert(\"추후 업데이트 예정입니다.\"),children:\"\\uCC28\\uB7C9 \\uC815\\uBCF4 \\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>alert(\"권한이 없습니다.\"),children:\"\\uBB38\\uC758 \\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>alert(\"추후 업데이트 예정입니다.\"),children:\"\\uC774\\uC6A9 \\uAC00\\uC774\\uB4DC\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"menu-list\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"\\uACF5\\uC9C0\\uC0AC\\uD56D\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigate(\"/app/resident/visited\");},children:\"\\uBC29\\uBB38\\uD588\\uB358 \\uCC28\\uB7C9\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigate(\"/app/resident/favorite\");},children:\" \\uC990\\uACA8 \\uCC3E\\uB294 \\uCC28\\uB7C9 \"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>alert(\"추후 업데이트 예정입니다.\"),children:\"\\uC790\\uC8FC \\uBB3B\\uB294 \\uC9C8\\uBB38\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:handleLogout,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]});};export default ResidentMypage;","map":{"version":3,"names":["data","useNavigate","fetchHeaderBundle","useEffect","useState","useUser","jsx","_jsx","jsxs","_jsxs","ResidentMypage","navigate","profile","mypageData","setMypageData","id","loadmypage","_data$current_spot","role_label","dong_ho","car_num","current_spot","error","console","log","handleLogout","children","className","concat","onClick","alert"],"sources":["D:/포폴 사용/stay/src/pages/ResidentMypage.js"],"sourcesContent":["// --- 입주민 마이페이지 ---\n\nimport { data, useNavigate } from \"react-router-dom\";\nimport {fetchHeaderBundle} from \"../api/userApi\";\nimport \"./ResidentMypage.scss\";\nimport { useEffect, useState } from \"react\";\nimport { useUser } from \"../contexts/UserContext\";\n\nconst ResidentMypage = () => {\n  const navigate = useNavigate();\n  const {profile} = useUser();\n  const [mypageData, setMypageData] = useState(null);\n\n  //마이페이지 데이터 로드\n  useEffect(() =>{\n    if (!profile?.id) return;\n    const loadmypage = async () => {\n      try{\n        const data = await fetchHeaderBundle(profile.id);\n        if(!data) {\n          //만약 가져온 데이터가 없다면 기본값(빈 값)으로 세팅\n          setMypageData({\n            role_label: \"입주민\",\n            dong_ho: profile.dong_ho || \"\",\n            car_num: profile.car_num || \"\",\n            current_spot: data?.current_spot ?? null,\n  });\n          return;\n        }\n        //가져온 데이터가 있다면(mypageData)에 담습니다. -> 이때 화면이 자동으로 다시 그려집니다.\n        setMypageData(data);\n      } catch (error) {\n        //데이터를 가져오다 에러가 나면 콘솔에 표시하고 기본값을 세팅\n        console.log(\"마이 페이지 데이터 로딩 실패\", error);\n        setMypageData({\n          role_label: \"입주민\",\n          dong_ho: profile.dong_ho || \"\",\n          car_num: profile.car_num || \"\",\n          current_spot: null,\n        });\n      }\n    };\n    loadmypage();\n  },[]);\n  useEffect(()=>{\n    console.log(\"mypageData:\", mypageData);\n  },[mypageData]);\n\n  //로그아웃\n  const handleLogout = () =>{\n    navigate(\"/\");\n  };\n  if (mypageData === null) {\n    return <div>로딩중...</div>;\n  }\n  return (\n    <div className=\"resident-mypage\">\n      {/* 상단 카드 */}\n      <section className=\"resident-card\">\n        <div className=\"mypage-info\">\n          <span className=\"role\">{mypageData.role_label || \"입주민\"}</span>\n          <p className=\"address\">{mypageData.dong_ho || \"동·호수 정보 없음\"}</p>\n          <h2 className=\"car-number\">{mypageData.car_num || \"차량 정보 미등록\"}</h2>\n          <span className=\"parking-spot\">\n            {mypageData.current_spot? `현재 주차 위치: ${mypageData.current_spot}` : \"현재 주차 중이 아닙니다\"}\n          </span>\n      </div>\n      {/* 카드 버튼 */}\n      {/* 아직 기능이 연결되지 않은 버튼은 alert창을 띄움 */}\n      <div className=\"card-actions\">\n        <button onClick={()=> alert(\"추후 업데이트 예정입니다.\")}>차량 정보 수정</button>\n        <button onClick={()=>alert(\"권한이 없습니다.\")}>문의 하기</button>\n        <button onClick={()=> alert(\"추후 업데이트 예정입니다.\")}>이용 가이드</button>\n      </div>\n      </section>\n      {/* 메뉴 리스트 */}\n      <section className=\"menu-list\">\n        <button>공지사항</button>\n        <button\n          onClick={()=>{\n            navigate(\"/app/resident/visited\");\n          }}\n        >\n          방문했던 차량\n        </button>\n      <button onClick={() => { navigate(\"/app/resident/favorite\");}}> 즐겨 찾는 차량 </button>\n      <button onClick={()=> alert(\"추후 업데이트 예정입니다.\")}>자주 묻는 질문</button>\n      </section>\n      {/* 로그아웃 */}\n      <button className=\"logout-btn\" onClick={handleLogout}>로그아웃</button>\n    </div>\n  );\n};\n\nexport default ResidentMypage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}