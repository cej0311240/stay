{"ast":null,"code":"// --- 방문 차량 등록 ---\nimport{useState}from\"react\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import\"./Car.scss\";import{useUser}from\"../../contexts/UserContext\";// import { useParkingBoard } from \"../../contexts/ParkingContext\";\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VisitCar=()=>{const[carNumber,setCarNumber]=useState(\"\");// 차량 번호\nconst[visitDate,setVisitDate]=useState(null);// 방문 날짜\nconst[reason,setReason]=useState(\"\");// 방문 사유\nconst{createDaily}=useUser();const[loading,setLoading]=useState(false);// const { enter_car, refreshBoard } = useParkingBoard(); // 주차 현황판\n// 날짜를 YYYY-MM-DD 형식으로 변환\nconst formatDate=date=>{const year=date.getFullYear();const month=String(date.getMonth()+1).padStart(2,\"0\");const day=String(date.getDate()).padStart(2,\"0\");return\"\".concat(year,\"-\").concat(month,\"-\").concat(day);};const handleSubmit=async e=>{e.preventDefault();// 필수값 검증\nif(!carNumber||!visitDate){alert(\"차량 번호와 방문 날짜를 입력해주세요.\");return;}const dateISO=formatDate(visitDate);// const today = formatDate(new Date());\nsetLoading(true);try{// 방문 차량 등록\nconst res=await createDaily({carNum:carNumber,dateISO});if(!res.ok){alert(res.message||\"등록 실패\");return;}// // 당일 방문 차량이면 바로 입차\n// if (dateISO === today) {\n//   await enter_car(carNumber);\n// }\n// // 현황판 갱신\n// await refreshBoard();\n// 성공 알림\nalert(\"\\uBC29\\uBB38 \\uCC28\\uB7C9 \\uB4F1\\uB85D \\uC644\\uB8CC: \".concat(carNumber));// 입력값 초기화\nsetCarNumber(\"\");setVisitDate(null);setReason(\"\");}catch(err){console.error(err);alert(\"방문 차량 등록 중 오류가 발생했습니다.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"form\",{className:\"visit-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uCC28\\uB7C9 \\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:carNumber,placeholder:\"\\uCC28\\uB7C9\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",onChange:e=>setCarNumber(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uBC29\\uBB38 \\uB0A0\\uC9DC\"}),/*#__PURE__*/_jsx(DatePicker,{selected:visitDate,onChange:date=>setVisitDate(date),placeholderText:\"\\uBC29\\uBB38 \\uB0A0\\uC9DC\\uB97C \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694\",dateFormat:\"yyyy.MM.dd\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uBC29\\uBB38 \\uC0AC\\uC720 (\\uC7A5\\uAE30 \\uBC29\\uBB38 \\uC2DC)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:reason,placeholder:\"\\uC7A5\\uAE30 \\uB4F1\\uB85D \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uB429\\uB2C8\\uB2E4\",onChange:e=>setReason(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"car-btn\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?\"등록 중...\":\"차량 등록\"})})]});};export default VisitCar;","map":{"version":3,"names":["useState","DatePicker","useUser","jsx","_jsx","jsxs","_jsxs","VisitCar","carNumber","setCarNumber","visitDate","setVisitDate","reason","setReason","createDaily","loading","setLoading","formatDate","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","concat","handleSubmit","e","preventDefault","alert","dateISO","res","carNum","ok","message","err","console","error","className","onSubmit","children","type","value","placeholder","onChange","target","selected","placeholderText","dateFormat","disabled"],"sources":["D:/포폴 사용/stay/src/components/mode/VisitCar.js"],"sourcesContent":["// --- 방문 차량 등록 ---\nimport { useState } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"./Car.scss\";\nimport { useUser } from \"../../contexts/UserContext\";\n// import { useParkingBoard } from \"../../contexts/ParkingContext\";\n\nconst VisitCar = () => {\n  const [carNumber, setCarNumber] = useState(\"\"); // 차량 번호\n  const [visitDate, setVisitDate] = useState(null); // 방문 날짜\n  const [reason, setReason] = useState(\"\"); // 방문 사유\n  const { createDaily } = useUser();\n  const [loading, setLoading] = useState(false);\n  // const { enter_car, refreshBoard } = useParkingBoard(); // 주차 현황판\n\n  // 날짜를 YYYY-MM-DD 형식으로 변환\n  const formatDate = (date) => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, \"0\");\n    const day = String(date.getDate()).padStart(2, \"0\");\n    return `${year}-${month}-${day}`;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // 필수값 검증\n    if (!carNumber || !visitDate) {\n      alert(\"차량 번호와 방문 날짜를 입력해주세요.\");\n      return;\n    }\n\n    const dateISO = formatDate(visitDate);\n    // const today = formatDate(new Date());\n\n    setLoading(true);\n\n    try {\n      // 방문 차량 등록\n      const res = await createDaily({ carNum: carNumber, dateISO });\n      if (!res.ok) {\n        alert(res.message || \"등록 실패\");\n        return;\n      }\n\n      // // 당일 방문 차량이면 바로 입차\n      // if (dateISO === today) {\n      //   await enter_car(carNumber);\n      // }\n\n      // // 현황판 갱신\n      // await refreshBoard();\n\n      // 성공 알림\n      alert(`방문 차량 등록 완료: ${carNumber}`);\n\n      // 입력값 초기화\n      setCarNumber(\"\");\n      setVisitDate(null);\n      setReason(\"\");\n    } catch (err) {\n      console.error(err);\n      alert(\"방문 차량 등록 중 오류가 발생했습니다.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return (\n    <form className=\"visit-form\" onSubmit={handleSubmit}>\n      <div className=\"input-group\">\n        <label>차량 번호</label>\n        <input\n          type=\"text\"\n          value={carNumber}\n          placeholder=\"차량번호를 입력해주세요\"\n          onChange={(e) => setCarNumber(e.target.value)}\n        />\n      </div>\n      <div className=\"input-group\">\n        <p>방문 날짜</p>\n        <DatePicker\n          selected={visitDate}\n          onChange={(date) => setVisitDate(date)}\n          placeholderText=\"방문 날짜를 선택해주세요\"\n          dateFormat=\"yyyy.MM.dd\"\n        />\n      </div>\n      <div className=\"input-group\">\n        <label>방문 사유 (장기 방문 시)</label>\n        <input\n          type=\"text\"\n          value={reason}\n          placeholder=\"장기 등록 페이지에서 사용됩니다\"\n          onChange={(e) => setReason(e.target.value)}\n        />\n      </div>\n\n      {/* 등록 버튼 */}\n      <div className=\"car-btn\">\n        <button type=\"submit\" disabled={loading}>\n          {loading ? \"등록 중...\" : \"차량 등록\"}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default VisitCar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}