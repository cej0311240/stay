{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import\"./Weather.scss\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Weather=()=>{const KEY=\"3a9340324a223326c5a3ab260bbc3496\";const[weather,setWeather]=useState(null);const[iconUrl,setIconUrl]=useState(\"\");const[error,setError]=useState(null);const[loading,setLoading]=useState(false);// 날씨 API 호출\nconst fetchWeather=async(lat,lon)=>{try{setError(\"\");setLoading(true);const URL=\"https://api.openweathermap.org/data/2.5/weather?lat=\".concat(lat,\"&lon=\").concat(lon,\"&appid=\").concat(KEY,\"&units=metric&lang=kr\");const res=await axios.get(URL);setWeather(res.data);const iconCode=res.data.weather[0].icon;const ICON=\"https://openweathermap.org/img/wn/\".concat(iconCode,\"@2x.png\");setIconUrl(ICON);}catch(err){setError(\"날씨 정보를 가져올 수 없습니다: \"+err.message);}finally{setLoading(false);}};useEffect(()=>{const options={enableHighAccuracy:true,timeout:5000,maximumAge:0};const fetchDefaultWeather=()=>{// 위치 못 가져올 때 fallback 좌표 ( 서울)\nconst defaultLat=37.5665;const defaultLon=126.978;setError(\"위치 정보를 가져올 수 없어 기본 위치(서울)로 표시합니다\");fetchWeather(defaultLat,defaultLon);};if(\"geolocation\"in navigator){navigator.geolocation.getCurrentPosition(position=>{const{latitude,longitude}=position.coords;fetchWeather(latitude,longitude);},()=>{// 사용자가 위치 허용 안했거나 오류 발생 시 기본 좌표 사용\nfetchDefaultWeather();},options);}else{fetchDefaultWeather();}},[]);return/*#__PURE__*/_jsxs(\"div\",{id:\"weather-page\",children:[loading&&/*#__PURE__*/_jsx(\"p\",{className:\"loading\",children:\"\\uB0A0\\uC528 \\uC815\\uBCF4\\uB97C \\uAC00\\uC838\\uC624\\uB294 \\uC911...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),!weather&&!loading&&!error&&/*#__PURE__*/_jsx(\"p\",{children:\"\\uC704\\uCE58 \\uC815\\uBCF4\\uB97C \\uAE30\\uB2E4\\uB9AC\\uB294 \\uC911...\"}),weather&&/*#__PURE__*/_jsxs(\"div\",{className:\"weather\",children:[iconUrl&&/*#__PURE__*/_jsx(\"img\",{src:iconUrl,alt:weather.weather[0].description})// 날씨 이미지\n,/*#__PURE__*/_jsxs(\"div\",{className:\"top\",children:[/*#__PURE__*/_jsx(\"p\",{children:weather.weather[0].description}),/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uCD5C\\uACE0: \",weather.main.temp_max.toFixed(1),\"\\u2103\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uCD5C\\uC800: \",weather.main.temp_min.toFixed(1),\"\\u2103\"]})]})]})]})]});};export default Weather;","map":{"version":3,"names":["useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Weather","KEY","weather","setWeather","iconUrl","setIconUrl","error","setError","loading","setLoading","fetchWeather","lat","lon","URL","concat","res","get","data","iconCode","icon","ICON","err","message","options","enableHighAccuracy","timeout","maximumAge","fetchDefaultWeather","defaultLat","defaultLon","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","id","children","className","src","alt","description","main","temp_max","toFixed","temp_min"],"sources":["D:/포폴 사용/stay/src/components/Weather.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./Weather.scss\";\n\nconst Weather = () => {\n  const KEY = \"3a9340324a223326c5a3ab260bbc3496\";\n  const [weather, setWeather] = useState(null);\n  const [iconUrl, setIconUrl] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  // 날씨 API 호출\n  const fetchWeather = async (lat, lon) => {\n    try {\n      setError(\"\");\n      setLoading(true);\n      const URL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${KEY}&units=metric&lang=kr`;\n      const res = await axios.get(URL);\n      setWeather(res.data);\n      const iconCode = res.data.weather[0].icon;\n      const ICON = `https://openweathermap.org/img/wn/${iconCode}@2x.png`;\n      setIconUrl(ICON);\n    } catch (err) {\n      setError(\"날씨 정보를 가져올 수 없습니다: \" + err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    const options = {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 0,\n    };\n\n    const fetchDefaultWeather = () => {\n      // 위치 못 가져올 때 fallback 좌표 ( 서울)\n      const defaultLat = 37.5665;\n      const defaultLon = 126.978;\n      setError(\"위치 정보를 가져올 수 없어 기본 위치(서울)로 표시합니다\");\n      fetchWeather(defaultLat, defaultLon);\n    };\n\n    if (\"geolocation\" in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          fetchWeather(latitude, longitude);\n        },\n        () => {\n          // 사용자가 위치 허용 안했거나 오류 발생 시 기본 좌표 사용\n          fetchDefaultWeather();\n        },\n        options\n      );\n    } else {\n      fetchDefaultWeather();\n    }\n  }, []);\n\n  return (\n    <div id=\"weather-page\">\n      {loading && <p className=\"loading\">날씨 정보를 가져오는 중...</p>}\n      {error && <p className=\"error\">{error}</p>}\n      {!weather && !loading && !error && <p>위치 정보를 기다리는 중...</p>}\n      {weather && (\n        <div className=\"weather\">\n          {iconUrl && (\n            <img src={iconUrl} alt={weather.weather[0].description} /> // 날씨 이미지\n          )}\n          <div className=\"top\">\n            {/* 날씨 정보 */}\n            <p>{weather.weather[0].description}</p>\n            <div className=\"title\">\n              {/* 날씨 온도 */}\n              <p>최고: {weather.main.temp_max.toFixed(1)}℃</p>\n              <p>최저: {weather.main.temp_min.toFixed(1)}℃</p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Weather;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}