{"ast":null,"code":"import SpotCard from\"./SpotCard\";import\"./ParkingGrid.scss\";import ParkingInfo from\"./ParkingInfo\";import{useState,useEffect,useRef}from\"react\";import{useParkingBoard}from\"../contexts/ParkingContext\";// 드래그 최소 거리\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SWIPE_THRESHOLD=50;const ParkingGird=()=>{// 스크롤 처리\nconst[open,setOpen]=useState(false);const startY=useRef(0);const isMouseDown=useRef(false);// 드래그 시작\nconst handleStart=y=>{startY.current=y;isMouseDown.current=true;};// 드래그 종료\nconst handleEnd=y=>{if(!isMouseDown.current)return;const diff=startY.current-y;isMouseDown.current=false;if(Math.abs(diff)<SWIPE_THRESHOLD)return;setOpen(diff>0);};// pc에서도 드래그 처리\nuseEffect(()=>{const onMouseUp=e=>handleEnd(e.clientY);document.addEventListener(\"mouseup\",onMouseUp);return()=>document.removeEventListener(\"mouseup\",onMouseUp);},[]);// 주차 자리 데이터\nconst{spots,summary,refreshBoard}=useParkingBoard();// 주차 데이터 불러오기\nconst grid=spots.filter(s=>s.zone===\"APT\");const shop=spots.filter(s=>s.zone===\"STORE\");return/*#__PURE__*/_jsxs(\"div\",{className:\"parking \".concat(open?\"open\":\"\"),onMouseDown:e=>handleStart(e.clientY),onTouchStart:e=>handleStart(e.touches[0].clientY),onTouchEnd:e=>handleEnd(e.changedTouches[0].clientY),children:[/*#__PURE__*/_jsx(\"div\",{className:\"handle\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info_box\",children:[/*#__PURE__*/_jsx(ParkingInfo,{data:summary}),/*#__PURE__*/_jsx(\"button\",{className:\"re-btn\",onClick:()=>refreshBoard(),children:\"\\uC0C8\\uB85C\\uACE0\\uCE68\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"all_box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"R_box\",children:grid.map(item=>/*#__PURE__*/_jsx(SpotCard,{data:item},item.spot_id))}),/*#__PURE__*/_jsx(\"div\",{className:\"S_box\",children:shop.map(item=>/*#__PURE__*/_jsx(SpotCard,{data:item},item.spot_id))})]})]});};export default ParkingGird;","map":{"version":3,"names":["SpotCard","ParkingInfo","useState","useEffect","useRef","useParkingBoard","jsx","_jsx","jsxs","_jsxs","SWIPE_THRESHOLD","ParkingGird","open","setOpen","startY","isMouseDown","handleStart","y","current","handleEnd","diff","Math","abs","onMouseUp","e","clientY","document","addEventListener","removeEventListener","spots","summary","refreshBoard","grid","filter","s","zone","shop","className","concat","onMouseDown","onTouchStart","touches","onTouchEnd","changedTouches","children","data","onClick","map","item","spot_id"],"sources":["D:/포폴 사용/stay/src/components/ParkingGird.js"],"sourcesContent":["import SpotCard from \"./SpotCard\";\nimport \"./ParkingGrid.scss\";\nimport ParkingInfo from \"./ParkingInfo\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { useParkingBoard } from \"../contexts/ParkingContext\"; \n\n// 드래그 최소 거리\nconst SWIPE_THRESHOLD = 50;\n\nconst ParkingGird = () => {\n  // 스크롤 처리\n  const [open, setOpen] = useState(false);\n\n  const startY = useRef(0);\n  const isMouseDown = useRef(false);\n  // 드래그 시작\n  const handleStart = (y) => {\n    startY.current = y;\n    isMouseDown.current = true;\n  };\n  // 드래그 종료\n  const handleEnd = (y) => {\n    if (!isMouseDown.current) return;\n\n    const diff = startY.current - y;\n    isMouseDown.current = false;\n\n    if (Math.abs(diff) < SWIPE_THRESHOLD) return;\n    setOpen(diff > 0);\n  };\n  // pc에서도 드래그 처리\n  useEffect(() => {\n    const onMouseUp = (e) => handleEnd(e.clientY);\n\n    document.addEventListener(\"mouseup\", onMouseUp);\n    return () => document.removeEventListener(\"mouseup\", onMouseUp);\n  }, []);\n\n\n  // 주차 자리 데이터\n  const { spots, summary,refreshBoard} = useParkingBoard();\n  \n\n  // 주차 데이터 불러오기\n\n  const grid = spots.filter((s) => s.zone === \"APT\");\n  const shop = spots.filter((s) => s.zone === \"STORE\");\n\n\n  return (\n    <div\n      className={`parking ${open ? \"open\" : \"\"}`}\n      onMouseDown={(e) => handleStart(e.clientY)}\n      onTouchStart={(e) => handleStart(e.touches[0].clientY)}\n      onTouchEnd={(e) => handleEnd(e.changedTouches[0].clientY)}\n    >\n      <div className=\"handle\" />\n      <div className=\"info_box\">\n        <ParkingInfo data={summary}/>\n        <button  className=\"re-btn\"onClick={() => refreshBoard()}>새로고침</button>\n      </div>\n      <div className=\"all_box\">\n        <div className=\"R_box\">\n          {grid.map((item) => (\n            <SpotCard key={item.spot_id} data={item} />\n          ))}\n        </div>\n        <div className=\"S_box\">\n          {shop.map((item) => (\n            <SpotCard key={item.spot_id} data={item} />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ParkingGird;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}