{"ast":null,"code":"// --- 사업자 마이페이지 ---\nimport{useNavigate}from\"react-router-dom\";import\"./BusinessMypage.scss\";import{useEffect,useState}from\"react\";import{fetchHeaderBundle}from\"../api/userApi\";import{useUser}from\"../contexts/UserContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BusinessMypage=()=>{var _mypageData$current_s;const navigate=useNavigate();const{profile}=useUser();const[mypageData,setMypageData]=useState(null);//마이페이지 데이터 로드\nuseEffect(()=>{const loadmypage=async()=>{if(!(profile!==null&&profile!==void 0&&profile.id))return;try{const data=await fetchHeaderBundle(profile.id);if(!data){//만약 가져온 데이터가 없다면 기본값(빈 값)으로 세팅\nsetMypageData({role_label:\"사업자\",dong_ho:profile.dong_ho||\"\",user_name:\"\",current_spot:null});return;}//가져온 데이터가 있다면 (mypageData)에 담습니다. 이때 화면이 자동으로 다시 그려집니다.\nsetMypageData(data);}catch(error){//데이터를 가져오다 에러가 나면 콜솔에 표시하고 기본갑을 세팅\nconsole.log(\"마이페이지 데이터 로딩 실패\",error);setMypageData({role_label:\"사업자\",dong_ho:profile.dong_ho||\"\",user_name:\"\",current_spot:\"\"});}};loadmypage();},[]);useEffect(()=>{console.log(\"mypageData:\",mypageData);},[mypageData]);//로그아웃 처리\nconst handleLogout=()=>{navigate(\"/\");};if(mypageData===null){return/*#__PURE__*/_jsx(\"div\",{children:\"\\uB85C\\uB529\\uC911...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"business-mypage\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"business-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mypage-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"role\",children:mypageData.role_label||\"사업자\"}),/*#__PURE__*/_jsx(\"p\",{className:\"address\",children:mypageData.dong_ho||\"동·호수 정보 없음\"}),mypageData.user_type===\"STORE\"&&/*#__PURE__*/_jsx(\"h2\",{className:\"name\",children:mypageData.user_name||\"상호명 미등록\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"parking-spot\",children:[\"\\uD604\\uC7AC \\uC8FC\\uCC28 \\uC704\\uCE58:\",\"\",\" \",(_mypageData$current_s=mypageData.current_spot)!==null&&_mypageData$current_s!==void 0?_mypageData$current_s:\"현재 주차 중이 아닙니다\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mypage-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>alert(\"추후 업데이트 예정입니다.\"),children:\"\\uCC28\\uB7C9 \\uC815\\uBCF4 \\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>alert(\"권한이 없습니다.\"),children:\"\\uBB38\\uC758 \\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>alert(\"추후 업데이트 예정입니다.\"),children:\"\\uC774\\uC6A9 \\uAC00\\uC774\\uB4DC\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"mypage-menu\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"\\uACF5\\uC9C0\\uC0AC\\uD56D\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigate(\"/app/business/visited\");},children:\"\\uBC29\\uBB38\\uD588\\uB358 \\uCC28\\uB7C9\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>alert(\"추후 업데이트 예정입니다.\"),children:\"\\uC790\\uC8FC \\uBB3B\\uB294 \\uC9C8\\uBB38\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"mypage-logout\",onClick:handleLogout,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]});};export default BusinessMypage;","map":{"version":3,"names":["useNavigate","useEffect","useState","fetchHeaderBundle","useUser","jsx","_jsx","jsxs","_jsxs","BusinessMypage","_mypageData$current_s","navigate","profile","mypageData","setMypageData","loadmypage","id","data","role_label","dong_ho","user_name","current_spot","error","console","log","handleLogout","children","className","user_type","onClick","alert"],"sources":["D:/포폴 사용/stay/src/pages/BusinessMypage.js"],"sourcesContent":["// --- 사업자 마이페이지 ---\n\nimport { useNavigate } from \"react-router-dom\";\nimport \"./BusinessMypage.scss\";\nimport { useEffect, useState } from \"react\";\nimport { fetchHeaderBundle } from \"../api/userApi\";\nimport { useUser } from \"../contexts/UserContext\";\n\nconst BusinessMypage = () => {\n  const navigate = useNavigate();\n  const { profile } = useUser();\n  const [mypageData, setMypageData] = useState(null);\n  //마이페이지 데이터 로드\n  useEffect(() => {\n    const loadmypage = async () => {\n      if (!profile?.id) return;\n      try {\n        const data = await fetchHeaderBundle(profile.id);\n        if (!data) {\n          //만약 가져온 데이터가 없다면 기본값(빈 값)으로 세팅\n          setMypageData({\n            role_label: \"사업자\",\n            dong_ho: profile.dong_ho || \"\",\n            user_name: \"\",\n            current_spot: null,\n          });\n          return;\n        }\n        //가져온 데이터가 있다면 (mypageData)에 담습니다. 이때 화면이 자동으로 다시 그려집니다.\n        setMypageData(data);\n      } catch (error) {\n        //데이터를 가져오다 에러가 나면 콜솔에 표시하고 기본갑을 세팅\n        console.log(\"마이페이지 데이터 로딩 실패\", error);\n        setMypageData({\n          role_label: \"사업자\",\n          dong_ho: profile.dong_ho || \"\",\n          user_name: \"\",\n          current_spot: \"\",\n        });\n      }\n    };\n    loadmypage();\n  }, []);\n  useEffect(() => {\n    console.log(\"mypageData:\", mypageData);\n  }, [mypageData]);\n\n  //로그아웃 처리\n  const handleLogout = () => {\n    navigate(\"/\");\n  };\n  if (mypageData === null) {\n    return <div>로딩중...</div>;\n  }\n  return (\n    <div className=\"business-mypage\">\n      {/* 상단 카드 */}\n      <section className=\"business-card\">\n        <div className=\"mypage-info\">\n          <span className=\"role\">{mypageData.role_label || \"사업자\"}</span>\n          <p className=\"address\">{mypageData.dong_ho || \"동·호수 정보 없음\"}</p>\n          {/* 사업자만 상호명 노출 */}\n          {mypageData.user_type === \"STORE\" && (\n            <h2 className=\"name\">{mypageData.user_name || \"상호명 미등록\"}</h2>\n          )}\n           <span className=\"parking-spot\">\n            현재 주차 위치:{\"\"} {mypageData.current_spot ?? \"현재 주차 중이 아닙니다\"}\n          </span>\n        </div>\n        {/* 카드 버튼 */}\n        {/* 아직 기능이 연결되지 않은 버튼은 alert창을 띄움 */}\n        <div className=\"mypage-actions\">\n          <button onClick={() => alert(\"추후 업데이트 예정입니다.\")}>\n            차량 정보 수정\n          </button>\n          <button onClick={() => alert(\"권한이 없습니다.\")}>문의 하기</button>\n          <button onClick={() => alert(\"추후 업데이트 예정입니다.\")}>\n            이용 가이드\n          </button>\n        </div>\n      </section>\n      {/* 메뉴 리스트 */}\n      <section className=\"mypage-menu\">\n        <button>공지사항</button>\n        <button\n          onClick={() => {\n            navigate(\"/app/business/visited\");\n          }}\n        >\n          방문했던 차량\n        </button>\n        <button onClick={() => alert(\"추후 업데이트 예정입니다.\")}>\n          자주 묻는 질문\n        </button>\n      </section>\n      {/* 로그아웃 */}\n      <button className=\"mypage-logout\" onClick={handleLogout}>\n        로그아웃\n      </button>\n    </div>\n  );\n};\n\nexport default BusinessMypage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}